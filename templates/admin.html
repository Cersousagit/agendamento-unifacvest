<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Painel Administrativo - UNIFACVEST</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<header class="topo">
    <img src="{{ url_for('static', filename='unifacvest.png') }}" class="logo">
    <a href="/logout" class="btn-sair">Sair</a>
</header>

<div class="container">

    {% for a in agendamentos %}
    <div class="card">
        <h3>{{ a.nome }}</h3>
        <p><strong>Disciplinas:</strong> {{ a.disciplinas }}</p>
        <p><strong>Data:</strong> {{ a.data }} | <strong>Hora:</strong> {{ a.hora }}</p>

        {% if not a.presente %}
            <a href="/presenca/{{ a.id }}" class="btn-presente">Presente</a>
        {% else %}
            <span class="presente-ok">✔ Presente</span>
        {% endif %}
    </div>
    {% endfor %}

    <div class="dashboard">
        <div class="box">
            <h4>Total de Presenças</h4>
            <p class="numero">{{ total_presentes }}</p>
        </div>

        <div class="box">
            <canvas id="grafico"></canvas>
        </div>
    </div>

</div>

<script>
const ctx = document.getElementById('grafico');
new Chart(ctx, {
    type: 'bar',
    data: {
        labels: {{ datas|tojson }},
        datasets: [{
            label: 'Agendamentos por Data',
            data: {{ quantidades|tojson }},
        }]
    }
});
</script>

</body>
</html>
